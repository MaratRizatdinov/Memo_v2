(()=>{"use strict";var e={d:(t,a)=>{for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{i:()=>d});const t={S:["./static/images/Spades.svg","./static/images/SpadesBig.svg"],H:["./static/images/Hearts.svg","./static/images/HeartsBig.svg"],D:["./static/images/Diamonds.svg","./static/images/DiamondsBig.svg"],C:["./static/images/Clubs.svg","./static/images/ClubsBig.svg"]},a=e=>{let a="",s=0;for(let i of e){let[e,n,l]=i.split("");a+="C"===l?`<div class="game__card card__close" data-index =${s} data-id =${i} ></div>`:`<div class="game__card card__open" data-index =${s} data-id =${i} >\n                <div class="card__top">\n                    <div class="card__value">${"X"===e?"10":e}</div>\n                    <img class="card__suit" src=${t[n][0]} />\n                </div>\n                <div class="card__center">\n                    <img src=${t[n][1]} />\n                </div>\n                <div class="card__bottom">\n                    <div class="card__value">${"X"===e?"10":e}</div>\n                    <img class="card__suit" src=${t[n][0]} />\n                </div>                \n            </div>`,s++}return a},s=([...e],t)=>e.length===t?[(new Date).getTime(),"win"]:e.length%2==0&&e[e.length-2]!==e[e.length-1]&&[(new Date).getTime(),"loss"],i=(e,t,n,l)=>{e.innerHTML=a(t);const c=document.querySelectorAll(".game__card");for(let a of c)a.addEventListener("click",(()=>{if(!a.dataset.index)return;const c=t[Number(a.dataset.index)];if("O"===c.slice(-1))return;n.push(c);const m=s(n,l.gameCards);m&&(l.gameTime=m[0]-l.gameTime,l.gameResult=m[1],l.gameLevel=4,d(l)),t[Number(a.dataset.index)]=c.slice(0,2)+"O",i(e,t,n,l)}))},n=e=>{const t=e=>e.toString().padStart(2,"0");let a=Math.floor(e/1e3),s=a<60?a:a-60*Math.floor(a/60),i=Math.floor(a/60);return i%=60,`${t(i)}.${t(s)}`},l=e=>{const t=document.getElementById("app"),s=`\n    \n                <div class="game__container">             \n                    <div class="game__header">\n                        <div class="game__timer">\n                            <div class="game__timertitle">\n                                <div class="game__timerdesc">min</div>\n                                <div class="game__timerdesc">sec</div>\n                            </div>\n                            <div class="game__tablo">${n(0)}</div>\n                        </div>\n                        <div class="game__button">Начать заново</div>\n                    </div>\n                    <div class="game__cards"></div>\n                </div>\n                <div class="modal"><div>  \n     `;t.innerHTML=s;const l=document.querySelector(".game__container"),c=document.querySelector(".modal"),m=document.querySelector(".game__tablo");4===e.gameLevel?(l.style.opacity="0.5",c.style.display="flex",((e,t)=>{const a=n(e.gameTime),s=`\n    <div class="modal__img">\n        <img src=${"win"===e.gameResult?"/static/images/WinImage.svg":"/static/images/LossImage.svg"} />\n    </div>\n    <div class="modal__title">${"win"===e.gameResult?"Вы выиграли!":"Вы проиграли!"}</div>\n    <div class="modal__timetitle">Затраченное время:</div>\n    <div class="modal__time">${a}</div>\n    <div class="modal__button">Играть снова</div>\n    `;t.innerHTML=s,document.querySelector(".modal__button").addEventListener("click",(()=>{e.gameLevel=1,e.gameTime=0,e.page="selectPage",e.gameResult="",d(e)}))})(e,c)):(l.style.opacity="1",c.style.display="none",setTimeout((()=>{const e=Number((new Date).getTime());setInterval((()=>{const t=Number((new Date).getTime());m.textContent=n(t-e)}),1e3)}),e.timeOut));const r=document.querySelector(".game__cards");((e,t)=>{t.style.gridTemplateColumns=`repeat(${e.gameColumns}, 95px)`;let s=(e=>{const t=(()=>{const e=["S","H","D","C"],t=["6","7","8","9","X","J","Q","K","A"],a=[];for(let s of e)for(let e of t)a.push(e+s+"O");return a})().sort((()=>.5-Math.random())).slice(0,e/2);return[...t,...t].sort((()=>.5-Math.random()))})(e.gameCards);const n=[];t.innerHTML=a(s),setTimeout((()=>{s=s.map((e=>e.slice(0,2)+"C")),e.gameTime=Number((new Date).getTime()),i(t,s,n,e)}),e.timeOut)})(e,r),document.querySelector(".game__button").addEventListener("click",(()=>{e.gameLevel=1,e.page="selectPage",d(e)}))},d=e=>{"selectPage"===e.page?(e=>{document.getElementById("app").innerHTML='\n        <div class="select">\n          <div class="select__title">Выбери сложность</div>\n          <div class="select__items">      \n            <input type="radio" id="radio1" name="radios" value="radio1" checked>\n            <label for="radio1" class =\'select__label\'>1</label>\n            \n            <input type="radio" id="radio2" name="radios" value="radio2">\n            <label for="radio2" class =\'select__label\'>2</label>\n            \n            <input type="radio" id="radio3" name="radios" value="radio3">\n            <label for="radio3" class =\'select__label\'>3</label>\n          </div>\n          <div class="select__button">Старт</div>\n        </div>\n        ';const t=document.querySelectorAll(".select__label");for(let a of t)a.addEventListener("click",(t=>{t.stopPropagation();const a=t.target;e.gameLevel=a.textContent?Number(a.textContent):1}));const a=document.querySelector(".select__button");null==a||a.addEventListener("click",(()=>{e.page="gamePage",d(e)}))})(e):"gamePage"===e.page&&l(e)};d({page:"selectPage",gameLevel:1,gameParams:[{id:1,columns:3,cards:6,timeOut:2e3},{id:2,columns:4,cards:12,timeOut:2e3},{id:3,columns:6,cards:18,timeOut:2e3},{id:4,columns:9,cards:36,timeOut:0}],get gameColumns(){return this.gameParams[this.gameLevel-1].columns},get gameCards(){return this.gameParams[this.gameLevel-1].cards},get timeOut(){return this.gameParams[this.gameLevel-1].timeOut},gameTime:0,gameResult:""})})();